# AVL-Tree

## Introduction

- AVL Treesæ˜¯ä¸€ç¨®ç‰¹æ®Šçš„Binary Search Treesï¼Œå®ƒç¬¦åˆBinary Search Treesçš„[æ‰€æœ‰ç‰¹æ€§](https://medium.com/@Kadai/%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%E5%A4%A7%E4%BE%BF%E7%95%B6-binary-search-tree-3c40be3204e)ã€‚å‡ºç¾çš„ç›®çš„æ˜¯é€šéå¹³è¡¡æ¨¹çš„æ–¹å¼é¿å…AVLæ¨¹é€€åŒ–ç‚ºLinked listã€‚
    
    
    1. ä»¥å·¦é‚Šç¯€é» ( left node ) ä½œç‚ºæ ¹çš„å­æ¨¹ ( sub-tree ) çš„æ‰€æœ‰å€¼éƒ½å°æ–¼æ ¹ç¯€é» ( root )
    2. ä»¥å³é‚Šç¯€é» ( right node ) ä½œç‚ºæ ¹çš„å­æ¨¹ ( sub-tree ) çš„æ‰€æœ‰å€¼éƒ½å¤§æ–¼æ ¹ç¯€é» ( root )
    3. ä»»æ„ç¯€é» ( node ) çš„å·¦ã€å³å­æ¨¹ä¹Ÿåˆ†åˆ¥ç¬¦åˆ BST çš„å®šç¾©
    4. ä¸å­˜åœ¨ä»»ä½•éµå€¼ ( key/value ) ç›¸ç­‰çš„ç¯€é»ã€‚

### **Balance Factor of T, BF(T)**

> For node T in a binary search tree is defined to be HL-HR, where HL and HR respectively, are the heights of the left and right subtree of T.
> 

ç°¡å–®ä¾†èªªå°±æ˜¯è¨ˆç®—å‡ºç¯€é» Tçš„å·¦å³å­ç¯€é»é«˜åº¦å¾Œç›¸æ¸›ï¼Œå³ç‚ºbalance factor

balance factoræœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

- BF(T) < -1ï¼šå³é‚Šsubtreeæ¯”è¼ƒé‡ï¼Œéœ€è¦å°‡ä¸€äº›å³é‚Šç¯€é»å¾€å·¦é‚Šèª¿æ•´
- -1 <= BF(T) <= 1ï¼šè¡¨ç¤ºå¹³è¡¡ï¼Œæš«æ™‚ä¸ç”¨èª¿æ•´
- BF(T) > 1ï¼šå·¦é‚Šsubtreeæ¯”è¼ƒé‡ï¼Œéœ€è¦å°‡ä¸€äº›å·¦é‚Šç¯€é»å¾€å³é‚Šèª¿æ•´

å¦‚ä¸‹åœ–ï¼Œå¯ä»¥è¨ˆç®—å„å€‹ç¯€é»ä¸Šçš„BF

![https://imgur.com/CXhHxQU.png](https://imgur.com/CXhHxQU.png)

### ****é«˜åº¦å¹³è¡¡**** hight-balanced

> **hight-balancedï¼š**
> 
1. Empty tree is height-balance
2. If T is a nonempty binary tree with TL and TR as left and right subtrees respectively, T is hight-balanced if
    1. TL and TR are height-balanced
    2. Math.abs( HL - HR) <= 1 where HL and HR are the height of TL and TR respectively.
    
- é™¤äº†Binary Search Treesçš„ç‰¹æ€§å¤–ï¼ŒAVLé‚„å¿…é ˆç¬¦åˆä»¥ä¸‹ç‰¹æ€§ï¼š`â€»æ¯ä¸€å€‹nodeçš„å·¦å­æ¨¹é«˜åº¦-å³å­æ¨¹é«˜åº¦åªèƒ½æ˜¯-1ã€0ã€1ã€‚`å¦‚æœå¾—åˆ°çš„çµæœ < -1æˆ– > 1ï¼Œå‰‡è¡¨ç¤ºé€™æ£µæ¨¹æœ‰æŸä¸€å´æ¯”è¼ƒé‡ï¼Œè™•æ–¼ä¸å¹³è¡¡çš„ç‹€æ…‹ï¼Œéœ€è¦èª¿æ•´ä¾†è®“æ¨¹ç¹¼çºŒç¶­æŒå¹³è¡¡ã€‚å› ç‚ºä¸Šè¿°ç‰¹æ€§ï¼ŒAVL Treesæœƒæˆç‚ºä¸€é¡†**å¹³è¡¡æ¨¹**ã€‚

ä¸‹é¢é€™å¼µåœ–æ¨™ç‚ºç¶ è‰²çš„ç¯€é»ï¼Œæˆ–æ˜¯ subtreeï¼Œè¡¨ç¤ºç‚ºbalanceï¼Œæ¨™ç‚ºç´…è‰²çš„éƒ¨åˆ†è¡¨ç¤ºä¸å¹³è¡¡ï¼Œéœ€è¦åšèª¿æ•´ã€‚

![https://imgur.com/rwBS4Vm.png](https://imgur.com/rwBS4Vm.png)

## Rotation

- åœ¨é‡åˆ°ä¸å¹³è¡¡æƒ…æ³æ™‚ï¼Œéœ€è¦èª¿æ•´æ•¸çš„ç¯€é»ï¼Œé€™é‚Šç¨±ç‚ºRotation
- Rotationæœ‰å€‹å¾ˆé‡è¦çš„ç›®çš„ï¼ŒÂ **rotation å‰èˆ‡å¾Œçš„æ¨¹ï¼Œæ•´å€‹ treeçš„ in-order traversal ç›¸åŒ**Â ã€‚ï¼ˆå¦‚æœè¦ç”¨äººè…¦ç•«æ¨¹çš„è©±ï¼Œä¹‹å¾Œéƒ½ç”¨é€™å€‹ä¾†æ¨ç®—ï¼‰

é¸æ“‡ç”¨ä½•ç¨®æ–¹å¼åš rotationï¼Œåˆ¤æ–·æº–å‰‡ç‚º

- BF >1ï¼Œè¡¨ç¤ºå·¦é‚Šè¼ƒé‡ï¼Œéœ€è¦åš right rotation
- BF<-1ï¼Œè¡¨ç¤ºå³é‚Šè¼ƒé‡ï¼Œéœ€è¦åš left rotation

<aside>
ğŸ’¡ **æœ‰é»åƒé–‹è»Šçš„æ™‚å€™ï¼Œå¦‚æœè»Šé ­åå·¦å°±å¾€å³æ‰“æ–¹å‘ç›¤ï¼Œè»Šé ­åå³å°±å¾€å·¦æ‰“æ–¹å‘ç›¤ã€‚**

</aside>

### **Left Rotation**

è®“æ¨¹å¾€å·¦é‚Šåš rotateä¾†é”åˆ°balance

å° Aåš left rotationï¼šå°‡Bçš„å·¦ç¯€é»è¨­ç‚º A çš„å³ç¯€é»å¾Œï¼Œå†å°‡Aè¨­ç‚º Bçš„å·¦ç¯€é»ï¼Œæ‰€ä»¥å¯ä»¥æ³¨æ„åœ–ä¸Šæœ‰é¡è‰²çš„ nullå¦‚ä½•è®ŠåŒ–ã€‚åŒæ™‚ in-orderçš„çµæœé‚„æ˜¯ä¸€æ¨£ä¸è®Šã€‚

![https://imgur.com/kyfwaJU.png](https://imgur.com/kyfwaJU.png)

### **Right Rotation**

è®“æ¨¹å¾€å³é‚Šåš rotateä¾†é”åˆ°balanceï¼Œåƒè€ƒä¸‹åœ–ï¼Œç°¡å–®æ­¥é©Ÿå¦‚ä¸‹ï¼š

å°Aåšright rotationï¼šå°‡Bçš„å³ç¯€é»è¨­ç‚º A çš„å·¦ç¯€é»å¾Œï¼Œå†å°‡Aè¨­ç‚º Bçš„å³ç¯€é»ï¼Œæ‰€ä»¥å¯ä»¥æ³¨æ„åœ–ä¸Šæœ‰é¡è‰²çš„ nullå¦‚ä½•è®ŠåŒ–ã€‚åŒæ™‚ in-orderçš„çµæœé‚„æ˜¯ä¸€æ¨£ä¸è®Šã€‚

![https://imgur.com/6pORgad.png](https://imgur.com/6pORgad.png)

### å››ç¨®æ—‹è½‰æ©Ÿåˆ¶

- AVL Tree çš„æ—‹è½‰æ©Ÿåˆ¶ä¸»è¦æœ‰å››ç¨®ï¼šå·¦æ—‹ã€å³æ—‹ã€å·¦å³æ—‹ã€å³å·¦æ—‹ã€‚å®ƒå€‘å¯ä»¥ä½¿ AVL Tree æ¢å¾©å¹³è¡¡ã€‚ä»¥ä¸‹æ˜¯æ¯ä¸€ç¨®æ—‹è½‰çš„è©³ç´°æ­¥é©Ÿè·Ÿæ–¹å¼ï¼š
1. **LLå‹ï¼šCè¢«æ–°å¢åˆ° A å·¦ç¯€é»çš„å·¦ç¯€é»ï¼Œä¸¦ä¸”éµç…§ä¸Šé¢æåˆ°çš„æ–¹å¼é¸æ“‡åšrotation**
    
    ![èª¿æ•´æ–¹å¼ï¼šå° Aåš right rotationå³å¯](https://imgur.com/PmdbIlE.png)
    
    èª¿æ•´æ–¹å¼ï¼šå° Aåš right rotationå³å¯
    
    ![https://imgur.com/5hR14L4.png](https://imgur.com/5hR14L4.png)
    
    inorder traversal
    
    èª¿æ•´å‰ï¼š C -> B -> A
    
    èª¿æ•´å¾Œï¼š C -> B -> A
    
2. **LRå‹ï¼šCè¢«æ–°å¢åˆ° A å·¦ç¯€é»çš„å³ç¯€é»**

![èª¿æ•´æ–¹å¼ï¼š**å…ˆå° Båš left rotation**ï¼Œæœƒè®Šæˆ LLå‹ï¼Œæ¥è‘—å†åšä¸€æ¬¡ right rotationå³å¯](https://imgur.com/ivGDNHL.png)

èª¿æ•´æ–¹å¼ï¼š**å…ˆå° Båš left rotation**ï¼Œæœƒè®Šæˆ LLå‹ï¼Œæ¥è‘—å†åšä¸€æ¬¡ right rotationå³å¯

![å…ˆåšleft rotation](https://imgur.com/hjWTJR0.png)

å…ˆåšleft rotation

![å†å°Aåš right rotationï¼š](https://imgur.com/AV5Gs7j.png)

å†å°Aåš right rotationï¼š

èª¿æ•´å®Œå¾Œï¼Œä¾†çœ‹èª¿æ•´å‰å¾Œæ¨¹çš„ in-order traversal

èª¿æ•´å‰ï¼š B -> C -> A

èª¿æ•´å¾Œï¼š B -> C -> A

**3. RRå‹ï¼šCè¢«æ–°å¢åˆ° A çš„å³ç¯€é»çš„å³ç¯€é»**

![https://imgur.com/vNl83ni.png](https://imgur.com/vNl83ni.png)

èª¿æ•´æ–¹å¼ï¼šå° Aåš left rotationå³å¯

![https://imgur.com/OVBU7Di.png](https://imgur.com/OVBU7Di.png)

èª¿æ•´å®Œå¾Œï¼Œä¾†çœ‹èª¿æ•´å‰å¾Œæ¨¹çš„ in-order traversalï¼š

èª¿æ•´å‰ï¼š A -> B ->C

èª¿æ•´å¾Œï¼š A -> B -> C

**4. RLå‹ï¼šCè¢«æ–°å¢åˆ° A å³ç¯€é»çš„å·¦ç¯€é»**

![èª¿æ•´æ–¹å¼ï¼šå° Båš right rotationå¾Œï¼Œå†å° A åš left rotation](https://imgur.com/4VDWBH5.png)

èª¿æ•´æ–¹å¼ï¼šå° Båš right rotationå¾Œï¼Œå†å° A åš left rotation

![å° Båš right rotation](https://imgur.com/A8m964n.png)

å° Båš right rotation

![å†å° Aåš left rotation](https://imgur.com/EBRUCmM.png)

å†å° Aåš left rotation

èª¿æ•´å®Œå¾Œï¼Œä¾†çœ‹èª¿æ•´å‰å¾Œæ¨¹çš„ in-order traversalï¼š

èª¿æ•´å‰ï¼š A -> C ->B

èª¿æ•´å¾Œï¼š A -> C -> B

### ç¯„ä¾‹

æœ€ä¸€é–‹å§‹é‚£å¼µæ²’æœ‰å¹³è¡¡çš„åœ–(å‡è¨­ç´«è‰²çš„ç¯€é»æ˜¯å‰›æ–°å¢ä¸Šå»çš„æ–°ç¯€é»)ï¼Œåœ¨æ–°å¢ç¯€é»å¾Œé€ æˆå·¦é‚Š subtreeéé‡ï¼Œæ‰€ä»¥éœ€è¦å° rootåš right rotationï¼Œé€™å¼µåœ–çš„æƒ…æ³å¯ä»¥åˆ¤æ–·ç‚º LLå‹ï¼Œå¦‚å‰é¢æåˆ°LLå‹å®šç¾©ï¼šæ–°å¢çš„ç´«è‰²ç¯€é»åœ¨root çš„å·¦ç¯€é»çš„å·¦ç¯€é»ï¼Œæ•…åªè¦åšä¸€æ¬¡ right rotationå³å¯ï¼š

![https://imgur.com/x31Irgr.png](https://imgur.com/x31Irgr.png)

åšäº† right rotationå¾Œ

![https://imgur.com/7KpEKHO.png](https://imgur.com/7KpEKHO.png)

## **æ™‚é–“è¤‡é›œåº¦**

| åŠŸèƒ½ | Average | Worst |
| --- | --- | --- |
| Search | $O(\log N)$ | $O(\log N)$ |
| Insert | $O(\log N)$ | $O(\log N)$ |
| Delete | $O(\log N)$ | $O(\log N)$ |

## å¯¦ä½œ

[AVL Tree å¯¦ä½œ](https://www.notion.so/AVL-Tree-c8ff643517cc4ca2b9dfcb8be4b94bb8)

### åƒè€ƒè³‡æ–™

[Data Structure - Ch2 Advanced Tree](https://mropengate.blogspot.com/2015/01/data-structure-ch2-advanced-tree.html)

[Insertion in an AVL Tree - GeeksforGeeks](https://www.geeksforgeeks.org/insertion-in-an-avl-tree/)

[[è³‡æ–™çµæ§‹] CH8. AVL Trees - HackMD](https://hackmd.io/@Zero871015/rJksqh83X?type=view)

[è³‡æ–™çµæ§‹èˆ‡æ¼”ç®—æ³•ï¼šAVL Tree](https://josephjsf2.github.io/data/structure/and/algorithm/2019/06/22/avl-tree.html)

[çº¢é»‘æ ‘æ¯” AVL æ ‘å…·ä½“æ›´é«˜æ•ˆåœ¨å“ªé‡Œï¼Ÿ](https://www.zhihu.com/question/19856999/answer/2706230925)